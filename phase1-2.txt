はじめにEPSとNとMの最大の値とLocation構造体を定義する。
scanf関数により、N,M,P,Qの値を入力する。
Nの値は座標の数であるため、Nの値分for文でLocation構造体のxとyとnumへそれぞれ値を入力する。
Mは道の数であり、それぞれ繋がる交差地点の番号を入力していくため、それを配列に入れる。
よって、一つの線分には座標の番号が二つ存在するため、i<M*2という条件を設定している。

次に、交差しているか判定する。
jのforループで一つの線分を選択し、iのforループでそれぞれの線分と交差しているか判定する。
一度判定したものは余計なので、if(i==j)i=i+2 というif文を使っている。
それぞれの線分の座標をp1_x,p1_y,q1_x,q1_y,p2_x,p2_y,q2_x,q2_yに代入する。
そして、phase1-1と同じように行列式を計算して、交差しているか判定する。
もし、交差していたらintersection配列に交点座標を代入する。
交差判定が終わったら、バブルソートによりintersection配列の中身を
x座標の小さいものから順に並び替える。もし、x座標が同じならy座標がより小さいものから順に
並び替える。

最後にintersection配列の値を出力する。